pipeline{
   agent { label 'jenkins-agent' }
   tools{
        jdk 'java-17'
        maven 'Maven3'
    }
    stages{
        stage("Cleanup Workspace"){
               steps {
                  cleanWs()
               }
        }
        stage("checkout from scm"){
              steps{
              git branch: 'main', credentialsID: 'github', url: 'https://github.com/abhipatil003/register-app'
              }
        }   
         stage("build application"){
               steps{
                   sh "mvn clean package"
               }
        }
         stage("test application"){
               steps{
                    sh "mvn test"
               }
        
        }
         
    }
}
